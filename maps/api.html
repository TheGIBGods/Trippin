<html>
<head>
    <title>A Leaflet map!</title>
    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css"/>
    <link rel="stylesheet" href="MarkerCluster.css"/>
    <script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>
    <script src="jquery-2.1.1.min.js"></script>
    <script src="leaflet.markercluster.js"></script>
    <style>
        #map{ width: 900px; height: 500px; }
    </style>
</head>
<body>

<div id="map"></div>

<script>

    var x = 42.35;
    var y = -71.08;
    // initialize the map
    var map = L.map('map').setView([x, y], 13);
    var type = "Hotel";

    // load a tile layer
    L.tileLayer('http://{s}.tile.openstreetmap.se/hydda/full/{z}/{x}/{y}.png',
            {
                attribution: 'Tiles by <a href="http://openstreetmap.se/" target="_blank">MAPC</a>, Data by <a href="http://mass.gov/mgis">MassGIS</a>',
                maxZoom: 17,
                minZoom: 2
            }).addTo(map);

    L.tileLayer('http://tiles.mapc.org/trailmap-onroad/{z}/{x}/{y}.png',
            {
                maxZoom: 17,
                minZoom: 9
            }).addTo(map);

    // load GeoJSON from an external file
    $.getJSON("neighborhoods.geojson",function(hoodData){
        L.geoJson( hoodData , {
            style: function(feature){
                var fillColor,
                        density = feature.properties.density;
                if ( density > 80 ) fillColor = "#006837";
                else if ( density > 40 ) fillColor = "#31a354";
                else if ( density > 20 ) fillColor = "#78c679";
                else if ( density > 10 ) fillColor = "#c2e699";
                else if ( density > 0 ) fillColor = "#ffffcc";
                else fillColor = "#f7f7f7";  // no data
                return { color: "#999", weight: 1, fillColor: fillColor, fillOpacity: .6 };
            },
            onEachFeature: function( feature, layer ){
                layer.bindPopup( "<strong>" + feature.properties.Name + "</strong><br/>" + feature.properties.density + " rats per square mile" )
            }
        }).addTo(map);
    });

    $.getJSON("rodents.geojson",function(data){
        var ratIcon = L.icon({
            iconUrl: 'photos/hotel.png',
            iconSize: [60,50]
        });
        var rodents = L.geoJson(data,{
            pointToLayer: function(feature,latlng){
                var marker = L.marker(latlng,{icon: ratIcon});
                marker.bindPopup(feature.properties.Location + '<br/>' + feature.id);
                return marker;
            }
        });
        var clusters = L.markerClusterGroup();
        clusters.addLayer(rodents);
        map.addLayer(clusters);
    });

</script>
</body>
</html>